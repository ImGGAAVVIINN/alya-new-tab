chrome.runtime.sendMessage({getContentScriptVars:true},function(e){if(window.finishedContentHomepage||window.self!==window.top)return;window.finishedContentHomepage=true;window.debug=e.debug;var t=e.showMinor;var n=(e.landingPage+"").replace(/^https?:\/\/|\/$/g,"");var a=(e.updatePage+"").replace(/^https?:\/\/|\/$/g,"");if(window.debug)console.log(n,t,a);var i=function(){if(document.getElementsByClassName("click-Rate").length){var e=document.getElementsByClassName("click-Rate");for(var t=0;t<e.length;t++){e[t].addEventListener("click",function(){chrome.runtime.sendMessage("click-Rate")})}}if(document.getElementsByClassName("click-ShareFB").length){var e=document.getElementsByClassName("click-ShareFB");for(var t=0;t<e.length;t++){e[t].addEventListener("click",function(){chrome.runtime.sendMessage("click-ShareFB")})}}if(document.getElementsByClassName("click-ShareTW").length){var e=document.getElementsByClassName("click-ShareTW");for(var t=0;t<e.length;t++){e[t].addEventListener("click",function(){chrome.runtime.sendMessage("click-ShareTW")})}}if(document.getElementsByClassName("click-Donate").length){var e=document.getElementsByClassName("click-Donate");for(var t=0;t<e.length;t++){e[t].addEventListener("click",function(){chrome.runtime.sendMessage("click-Donate")})}}};var o=function(){var e=document.getElementById("div-export-options-"+chrome.runtime.id);if(e&&!e.getAttribute("jsondata")){chrome.runtime.sendMessage({getGlobalOptions:true},function(t){e.setAttribute("jsondata",JSON.stringify(t))})}setTimeout(o,100)};var s=function(){if(document.body.style.background===""){if(window.debug)console.log("background image");document.body.style.background='linear-gradient(rgba(255,255,255,.5), rgba(255,255,255,.5)), url("'+e.bgImg+'")'}};var l=function(){if(window.debug)console.log("major update");var e=document.getElementsByClassName("entry-title");if(e){e[0].innerHTML="Update for "+chrome.i18n.getMessage("extName")}r()};var r=function(){if(window.debug)console.log("thanks");var e=document.getElementById("installChromeWebStore");if(e){e.style.display="block";e.innerHTML='<p style="color:salmon;font-size:large;font-weight:bold;"><img src="'+chrome.extension.getURL("/start/skin/icons/48.png")+'" style="vertical-align:middle;" /> Thanks for installing the extension! If you like it, please <a href="#" class="click-Rate">Rate</a>, <a href="#" class="click-ShareFB">Share on FB</a>, <a href="#" class="click-ShareTW">Tweet</a>, and <a href="#" class="click-Donate">Donate</a>.</p>';i()}s()};var c=function(){if(window.debug)console.log("minor update");var e=document.getElementById("installChromeWebStore");if(e){e.innerHTML='<p style="color:salmon;font-size:large;font-weight:bold;"><img src="'+chrome.extension.getURL("/start/skin/icons/48.png")+'" style="vertical-align:middle;" /> Thanks for using the extension! It was updated with bug-fixes, improvements and more HD images were added. If you like it, please <a href="#" class="click-Rate">Rate</a>, <a href="#" class="click-ShareFB">Share on FB</a>, <a href="#" class="click-ShareTW">Tweet</a>, and <a href="#" class="click-Donate">Donate</a>.</p>';i()}s()};var d=location.href;if(window.debug)console.log(d);if(d.indexOf(n)>-1){if(!t){r()}else{c()}}else if(d.indexOf(a)>-1){l()}else if(d.indexOf(chrome.runtime.id)>-1){if(window.debug)console.log("export settings to file for import later");o()}});